---
import avatarImage from "../assets/Jonathan_Acevedo.webp";
import flagEsImage from "../assets/Flag_Colombia.webp";
import flagEnImage from "../assets/Flag_United_States.webp";

const links = [
  { href: "#inicio", label: "Inicio", i18n: "Home" },
  { href: "#sobre-mi", label: "Sobre mí", i18n: "About" },
  { href: "#proyectos", label: "Proyectos", i18n: "Projects" },
  { href: "#blog", label: "Blog", i18n: "Blog" },
  { href: "#contacto", label: "Contáctame", i18n: "Contact" },
];

const avatarSrc = typeof avatarImage === "string" ? avatarImage : avatarImage.src;
const flagEsSrc = typeof flagEsImage === "string" ? flagEsImage : flagEsImage.src;
const flagEnSrc = typeof flagEnImage === "string" ? flagEnImage : flagEnImage.src;
---

<header
  id="site-header"
  role="banner"
  class="fixed top-4 left-4 right-4 z-50 flex items-center justify-between gap-4 rounded-2xl border border-transparent bg-transparent px-4 transition-all duration-300">
  <div class="flex items-center gap-3">
    <img
      src={avatarSrc}
      alt="Foto de perfil de Jonathan Acevedo"
      class="size-8 sm:size-16 rounded-full object-cover ring-2 ring-slate-200 dark:ring-slate-700 transition-transform duration-300 ease-out hover:scale-110 hover:ring-blue-500 dark:hover:ring-blue-400"
      width="64" height="64"
      decoding="async"
      fetchpriority="high"
    />
    <div class="leading-tight">
      <p class="text-sm font-semibold text-slate-900 dark:text-slate-100 text-[11px] sm:text-base">
        Jonathan Acevedo
      </p>
      <p
        id="Profession"
        class="font-normal text-[9px] sm:text-base text-slate-600 dark:text-slate-400 sm:text-sm"
        data-i18n="Profession"
      >
        Ingeniero de Sistemas y Computación
      </p>
    </div>
  </div>

  <div class="flex items-center justify-self-end gap-3 md:gap-4">
    <nav
      aria-label="Navegación principal"
      class="hidden md:block justify-self-end"
      role="navigation"
    >
      <ul class="flex items-center gap-6">
        {links.map((link) => (
          <li>
            <a
              href={link.href}
              data-i18n={link.i18n}
              class="relative font-medium text-sm text-black dark:text-slate-100 transition-colors duration-300 after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:origin-left after:scale-x-0 after:bg-blue-500 dark:after:bg-blue-500 after:transition-transform after:duration-500 hover:after:scale-x-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/70 rounded"
              aria-current="false"
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>

    <!-- 🔹 Separador moderno -->
    <div
      class="hidden md:block items-center h-6 w-[1px] bg-gradient-to-b from-slate-300 via-slate-400 to-slate-300 dark:from-slate-600 dark:via-slate-500 dark:to-slate-600 mx-4 rounded-full shadow-sm"
      role="separator" aria-orientation="vertical" aria-hidden="true"
    ></div>

    <div class="flex items-center justify-self-end gap-3 md:gap-4">
      <button
        id="lang-toggle"
        type="button"
        aria-label="Cambiar idioma"
        class="inline-flex size-6 md:size-7 items-center justify-center rounded-full overflow-hidden text-xs font-medium text-slate-800 transition-transform duration-200 hover:scale-110 hover:ring-2 hover:ring-blue-500/50 focus:outline-none dark:text-blue-400"
        data-lang="es"
        data-flag-es={flagEsSrc}
        data-flag-en={flagEnSrc}
        data-label-es="ES"
        data-label-en="EN"
        data-alt-es="Idioma actual: Español"
        data-alt-en="Current language: English"
        aria-live="polite"
      >
        <img
          id="lang-flag"
          src={flagEsSrc}
          alt="Idioma actual: Español"
          class="h-full w-full object-cover"
          width="24" height="24"
          decoding="async"
        />
      </button>

      <button
        id="theme-toggle-desktop"
        type="button"
        aria-label="Cambiar tema claro/oscuro"
        aria-pressed="false"
        class="inline-flex size-10 items-center justify-center rounded-xl text-slate-700 hover:text-blue-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:text-blue-400 dark:hover:text-blue-400"
      >
        <span
          id="theme-icon-desktop"
          class="material-symbols-outlined leading-none text-[20px] md:text-[22px]"
          aria-hidden="true"
        >light_mode</span>
      </button>
    </div>

    <button
      id="menu-btn"
      type="button"
      aria-label="Abrir menú de navegación"
      aria-controls="mobile-panel"
      aria-expanded="false"
      class="inline-flex size-10 items-center justify-center rounded-xl text-slate-700 transition-all duration-300 ease-out hover:scale-110 hover:bg-blue-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:text-blue-400 dark:hover:bg-blue-900/30 md:hidden"
    >
      <svg
        id="menu-icon-open"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="1.8"
        class="h-6 w-6 leading-none transition-transform duration-300 ease-out"
        fill="none"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <path d="M4 7h16"></path>
        <path d="M4 12h16"></path>
        <path d="M4 17h16"></path>
      </svg>
      <svg
        id="menu-icon-close"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="1.8"
        class="hidden h-6 w-6 leading-none transition-transform duration-300 ease-out"
        fill="none"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <path d="M6 6l12 12"></path>
        <path d="M18 6l-12 12"></path>
      </svg>
    </button>
  </div>
</header>

<div
  id="mobile-panel"
  class="md:hidden hidden fixed right-4 top-16 z-50 w-[min(92vw,22rem)] rounded-2xl border border-slate-200/70 bg-white/95 shadow-xl backdrop-blur dark:border-slate-700/60 dark:bg-slate-900/95"
  style="padding-right: env(safe-area-inset-right);"
  role="dialog" aria-modal="true" aria-label="Navegación móvil" inert
>
  <nav class="p-2">
    <ul class="flex flex-col divide-y divide-slate-200/60 dark:divide-slate-700/60">
      {links.map((link) => (
        <li>
          <a
            class="block px-4 py-3 text-sm text-slate-600 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/70 rounded"
            href={link.href}
            data-i18n={link.i18n}
            data-menu-link
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</div>

<!-- Scripts -->
<script type="module" src="/scripts/header.js"></script>
<script type="module" src="/scripts/i18n-client.js"></script>
<script type="module" src="/scripts/themeToggle.js"></script>
<script type="module" src="/scripts/menuToggle.js"></script>
